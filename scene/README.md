# Scene (Unity WebGL)  “живой мир”

## Цель
Сцена визуализирует симуляцию:
- агенты ходят по карте/сетке
- показывают эмоции (цвет/иконка/анимация)
- показывают реплики (speech bubbles)
- реагируют на события (микро-анимации, остановки, повороты)

Сцена доступна на `/scene/` через gateway.

## MVP (обязательный)
### 1) Подключение к WebSocket
- URL: `ws://<host>/ws/stream`
- слушаем сообщения:
  - `agents_state` — обновляем позиции, mood, plan
  - `event` — показываем bubble, если это реплика агента
  - `relations` — можно игнорировать в сцене (это для dashboard)

### 2) Отрисовка агентов
- На старте создаём N объектов-агентов по `GET /api/state` или при первом `agents_state`
- Каждый агент должен иметь:
  - имя над головой
  - индикатор mood (цвет/эмодзи)
  - позицию (pos.x,pos.z)

### 3) Движение
- Простая модель: плавно интерполировать к новой pos
- (Если успеем) простая логика “wander” на сервере или локально не нужна — сервер источник истины

### 4) Реплики
- На event типа dialogue(поле в payload type:event) показываем bubble на 2–4 секунды
- Дублировать текст события в лог (опционально)

## Управление (опционально, если успеем)
Можно добавить простую UI-панель прямо в Unity:
- отправить событие в мир
- написать агенту
- сменить скорость
Но это НЕ обязательно (этим управляет dashboard).

## Артефакты
- `unity/` — исходники проекта
- `webgl/` — WebGL build (лежит статикой и раздаётся nginx)

## Definition of Done
- `/scene/` открывается в браузере
- агенты появляются и двигаются
- периодически появляются реплики
- настроение видно визуально
